<head>
    <script>
        var game = {
            count: 0,
            color: ["white"],
            possibleColors: ["red", "blue", "green", "yellow"],
            gameInProgress: [],
            player: [],
            sound: {
                red: new Audio('https://s3.amazonaws.com/freecodecamp/simonSound1.mp3'),
                blue: new Audio('https://s3.amazonaws.com/freecodecamp/simonSound2.mp3'),
                green: new Audio('https://s3.amazonaws.com/freecodecamp/simonSound3.mp3'),
                yellow: new Audio('https://s3.amazonaws.com/freecodecamp/simonSound4.mp3')
            },
            strict: "Off",
        };

        function addColor() {

            var randomColor = Math.floor(Math.random() * game.possibleColors.length);
            game.gameInProgress.push(game.possibleColors[randomColor]);
            console.log("the value of gameInprogress:", game.gameInProgress)
            increment();
        }
        function increment() {
            document.getElementById("countspace").innerHTML = game.gameInProgress.length;
            var i = 0;
            var change = setInterval(function () {
                console.log(game.gameInProgress[i])
                document.getElementById(game.gameInProgress[i]).style.background = game.gameInProgress[i];
                setTimeout(function () {
                    document.getElementById(game.gameInProgress[i - 1]).style.background = game.color[0];
                }, 500);
                i++;
                if (i == game.gameInProgress.length) {
                    clearInterval(change)
                }
            }, 1000);
        }
        function strictMode() {
            if (game.strict === "Off") {
                game.strict = "On"
                restart();
                document.getElementById("strictbtn").innerHTML = "Strict On"
                document.getElementById("strictbtn").style.background = "green";
            } else {
                game.strict = "Off"
                document.getElementById("strictbtn").innerHTML = "Strict Off"
                document.getElementById("strictbtn").style.background = "white";
            }

        }

        function player(color) {
            if (color === "red") {
                game.sound.red
                console.log("is this even working", color === "red")
            } else if (color === "blue") {
                game.sound.blue;
                console.log("is this even working", color === "blue")
            } else if (color === "green") {
                game.sound.green;
                console.log("is this even working", color === "green")
            } else {
                game.sound.yellow;
                console.log("is this even working", color === "yellow")
            }

            game.player.push(color);

            if (game.gameInProgress.length === game.player.length) {
                if (game.gameInProgress.toString() !== game.player.toString()) {
                    alert("Sorry! wrong moves,you loose");
                    if (game.strict === "off") {
                     flash();
                     console.log("What is flash:",flash())
                        increment();
                    }
                } else {
                    addColor();
                    game.player = [];
                }
            }
        }


        function startGame() {
            if (game.gameInProgress.length > 0) {
                alert('sorry, game already in progress');
            } else {
                addColor();
            }
        }
        function restart() {
            game.gameInProgress = [];
            game.player = [];
            //document.getElementById("countspace").innerHTML = game.gameInProgress.length;
            startGame();

        }
        function flash() {
            game.player = [];
        
        }
    
    </script>
    <style>
        .buttons {
            cursor: pointer;
            height: 200px;
            width: 200px;
        }

        #red {

            border-top-left-radius: 300px;
            background-color: white;
            clear: left;
        }

        #red:active {
            background-color: pink;
        }

        #blue {

            border-bottom-left-radius: 300px;
            background-color: white;
            clear: left;
        }

        #blue:active {
            background-color: white;
        }

        #green {

            border-bottom-right-radius: 300px;
            background-color: white;
            clear: right;
        }

        #green:active {
            background-color: lightgreen;
        }

        #yellow {

            border-top-right-radius: 300px;
            background-color: white;
            clear: right;
        }

        #yellow:active {
            background-color: black;
        }

        .center {
            display: flex;
            flex-direction: row;
            justify-content: center;
            margin: 10px;
        }

        p {
            margin-bottom: 2px;
        }

        #countspace {
            height: 32px;
            width: 32px;
            background-color: none;
            border: 2px solid firebrick;
            color: firebrick;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
        }

        #startbtn {

            width: 112px;
            background-color: orangered;
        }
    </style>
</head>

<body>
    <center>
        <h1>Simon Game</h1>
        <div class="container-fluid">
            <div class="center">
                <button onclick="player('red')" class="buttons" id="red" val="0">red</button>
                <button onclick="player('yellow')" class="buttons" id="yellow" val="3">yellow</div>


        </div>
        <div class="center">
            <button onclick="player('blue')" class="buttons" id="blue" val="1">blue</button>
                <button onclick="player('green')" class="buttons" id="green" val="2">green</button>
                <center>
            </div>
        </div>
        <p>Count</p>
        <div id="countspace"></div>
        </div>
        <br>
        <button id="startbtn" onclick="startGame()">Start</button>

        </div>
        <br><br>
        <button onclick="strictMode()" id="strictbtn">strict-off</button>
        <br><br>

        <button onclick="reset()" id="reset">reset</button>






        </div>
        </div>